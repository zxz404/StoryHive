/*! For license information please see 323.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkapp_starter_project_with_webpack=self.webpackChunkapp_starter_project_with_webpack||[]).push([[323],{323:(e,t,n)=>{n.r(t),n.d(t,{LoginPg:()=>b});var r=n(775);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(){var e=d(),t=e.m(a),n=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function r(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===n||"GeneratorFunction"===(t.displayName||t.name))}var i={throw:1,return:2,break:3,continue:3};function f(e){var t,n;return function(r){t||(t={stop:function(){return n(r.a,2)},catch:function(){return r.v},abrupt:function(e,t){return n(r.a,i[e],t)},delegateYield:function(e,i,a){return t.resultName=i,n(r.d,o(e),a)},finish:function(e){return n(r.f,e)}},n=function(e,n,i){r.p=t.prev,r.n=t.next;try{return e(n,i)}finally{t.next=r.n}}),t.resultName&&(t[t.resultName]=r.v,t.resultName=void 0),t.sent=r.v,t.next=r.n;try{return e.call(this,t)}finally{r.p=t.prev,r.n=t.next}}}return(a=function(){return{wrap:function(t,n,r,i){return e.w(f(t),n,r,i&&i.reverse())},isGeneratorFunction:r,mark:e.m,awrap:function(e,t){return new p(e,t)},AsyncIterator:l,async:function(e,t,n,i,a){return(r(t)?c:s)(f(e),t,n,i,a)},keys:u,values:o}})()}function o(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError(i(e)+" is not iterable")}function u(e){var t=Object(e),n=[];for(var r in t)n.unshift(r);return function e(){for(;n.length;)if((r=n.pop())in t)return e.value=r,e.done=!1,e;return e.done=!0,e}}function s(e,t,n,r,i){var a=c(e,t,n,r,i);return a.next().then((function(e){return e.done?e.value:a.next()}))}function c(e,t,n,r,i){return new l(d().w(e,t,n,r),i||Promise)}function l(e,t){function n(r,i,a,o){try{var u=e[r](i),s=u.value;return s instanceof p?t.resolve(s.v).then((function(e){n("next",e,a,o)}),(function(e){n("throw",e,a,o)})):t.resolve(s).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,o)}))}catch(e){o(e)}}var r;this.next||(f(l.prototype),f(l.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),f(this,"_invoke",(function(e,i,a){function o(){return new t((function(t,r){n(e,a,t,r)}))}return r=r?r.then(o,o):o()}),!0)}function d(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function a(n,r,i,a){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return f(c,"_invoke",function(n,r,i){var a,u,s,c=0,l=i||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,u=0,s=e,f.n=n,o}};function p(n,r){for(u=n,s=r,t=0;!d&&c&&!i&&t<l.length;t++){var i,a=l[t],p=f.p,v=a[2];n>3?(i=v===r)&&(s=a[(u=a[4])?5:(u=3,3)],a[4]=a[5]=e):a[0]<=p&&((i=n<2&&p<a[1])?(u=0,f.v=r,f.n=a[1]):p<v&&(i=n<3||a[0]>r||r>v)&&(a[4]=n,a[5]=r,f.n=v,u=0))}if(i||n>1)return o;throw d=!0,r}return function(i,l,v){if(c>1)throw TypeError("Generator is already running");for(d&&1===l&&p(l,v),u=l,s=v;(t=u<2?e:s)||!d;){a||(u?u<3?(u>1&&(f.n=-1),p(u,s)):f.n=s:f.v=s);try{if(c=2,a){if(u||(i="next"),t=a[i]){if(!(t=t.call(a,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,u<2&&(u=0)}else 1===u&&(t=a.return)&&t.call(a),u<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),u=1);a=e}else if((t=(d=f.n<0)?s:n.call(r,f))!==o)break}catch(t){a=e,u=1,s=t}finally{c=1}}return{value:t,done:d}}}(n,i,a),!0),c}var o={};function u(){}function s(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(f(t={},r,(function(){return this})),t),p=c.prototype=u.prototype=Object.create(l);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,f(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return s.prototype=c,f(p,"constructor",c),f(c,"constructor",s),s.displayName="GeneratorFunction",f(c,i,"GeneratorFunction"),f(p),f(p,i,"Generator"),f(p,r,(function(){return this})),f(p,"toString",(function(){return"[object Generator]"})),(d=function(){return{w:a,m:v}})()}function f(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}f=function(e,t,n,r){function a(t,n){f(e,t,(function(e){return this._invoke(t,n,e)}))}t?i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},f(e,t,n,r)}function p(e,t){this.v=e,this.k=t}function v(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,i)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){v(a,r,i,o,u,"next",e)}function u(e){v(a,r,i,o,u,"throw",e)}o(void 0)}))}}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y(r.key),r)}}function y(e){var t=function(e){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}var b=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=this.createView()},t=[{key:"createView",value:function(){var e=document.createElement("section");return e.className="pg login-pg",e.innerHTML='\n            <div class="auth-cntnr">\n                <div class="auth-hero">\n                    <div class="auth-logo">\n                        <img src="../../images/Logo.png" alt="StoryHive Logo">\n                    </div>\n                    \n                    <div class="auth-hero-cnt">\n                        <h1 class="auth-hero-title">Every Moment Has a Story</h1>\n                        <p class="auth-hero-desc">Baikan pengalamanmu. Biarkan dunia mengenal perjalananmu.</p>\n                    </div>\n                    \n                    <div class="auth-dots">\n                        <div class="dot"></div>\n                        <div class="dot is-active"></div>\n                    </div>\n                </div>\n\n                <div class="auth-frm-cntnr">\n                    <div class="auth-hdr-sec">\n                        <h2 class="auth-title">Sign In to Your Account</h2>\n                        <p class="auth-subtitle">Don\'t have an account? <a href="#/register" class="btn-link">Sign up</a></p>\n                    </div>\n\n                    <form id="login-frm" class="auth-frm" novalidate>\n                        <div id="general-error" class="error-msg is-hidden" role="alert" aria-live="polite"></div>\n\n                        <div class="frm-group">\n                            <label for="email-input" class="is-required">Email Address</label>\n                            <input \n                                type="email" \n                                id="email-input" \n                                name="email"\n                                required\n                                placeholder="Enter your email address"\n                                aria-describedby="email-error"\n                                aria-required="true"\n                                autocomplete="email"\n                            >\n                            <div id="email-error" class="error-msg is-hidden" role="alert" aria-live="polite"></div>\n                        </div>\n\n                        <div class="frm-group">\n                            <label for="password-input" class="is-required">Password</label>\n                            <input \n                                type="password" \n                                id="password-input" \n                                name="password"\n                                required\n                                placeholder="Enter your password"\n                                aria-describedby="password-error"\n                                aria-required="true"\n                                autocomplete="current-password"\n                            >\n                            <div id="password-error" class="error-msg is-hidden" role="alert" aria-live="polite"></div>\n                        </div>\n\n                        <div class="frm-act">\n                            <button type="submit" id="btn-submit" class="btn-primary" aria-label="Sign in to your account">\n                                Sign In\n                            </button>\n                        </div>\n\n                        <div class="auth-switch">\n                            <p>\n                                Don\'t have an account? \n                                <a href="#/register" class="btn-link" aria-label="Create a new account">Sign up here</a>\n                            </p>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        ',e}},{key:"init",value:(u=h(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setupEventHandlers();case 1:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"setupEventHandlers",value:function(){var e=this;this.element.querySelector("#login-frm").addEventListener("submit",function(){var t=h(a().mark((function t(n){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,e.handleLogin();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());var t=this.element.querySelector("#email-input"),n=this.element.querySelector("#password-input");t.addEventListener("input",(function(){return e.validateEmail()})),n.addEventListener("input",(function(){return e.validatePassword()}))}},{key:"handleLogin",value:(o=h(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.validateForm()){e.next=3;break}return e.abrupt("return");case 3:return t={email:this.element.querySelector("#email-input").value.trim(),password:this.element.querySelector("#password-input").value.trim()},e.prev=4,this.showLoading(),e.next=8,r.default.login(t);case 8:if(n=e.sent,this.hideLoading(),!n.loginResult){e.next=14;break}return e.next=13,this.showSuccess("Login Berhasil!","Selamat datang kembali, ".concat(n.loginResult.name,"!"));case 13:window.location.hash="#/home";case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(4),this.hideLoading(),this.handleLoginError(e.t0);case 20:case"end":return e.stop()}}),e,this,[[4,16]])}))),function(){return o.apply(this,arguments)})},{key:"validateForm",value:function(){return this.validateEmail()&&this.validatePassword()}},{key:"validateEmail",value:function(){var e=this.element.querySelector("#email-input").value.trim();return e?this.isValidEmail(e)?(this.hideError("email"),!0):(this.showError("email","Format email tidak valid"),!1):(this.showError("email","Email wajib diisi"),!1)}},{key:"validatePassword",value:function(){return this.element.querySelector("#password-input").value.trim()?(this.hideError("password"),!0):(this.showError("password","Password wajib diisi"),!1)}},{key:"isValidEmail",value:function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}},{key:"showError",value:function(e,t){var n=this.element.querySelector("#".concat(e,"-error"));n&&(n.textContent=t,n.classList.remove("is-hidden"));var r=this.element.querySelector("#".concat(e,"-input"));r&&r.classList.add("has-error")}},{key:"hideError",value:function(e){var t=this.element.querySelector("#".concat(e,"-error"));t&&t.classList.add("is-hidden");var n=this.element.querySelector("#".concat(e,"-input"));n&&n.classList.remove("has-error")}},{key:"showSuccess",value:(i=h(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"==typeof Swal){e.next=5;break}return e.next=3,Swal.fire({icon:"success",title:t,text:n,confirmButtonText:"OK",confirmButtonColor:"#2563eb"});case 3:e.next=6;break;case 5:alert("".concat(t,": ").concat(n));case 6:case"end":return e.stop()}}),e)}))),function(e,t){return i.apply(this,arguments)})},{key:"showErrorAlert",value:(n=h(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"==typeof Swal){e.next=5;break}return e.next=3,Swal.fire({icon:"error",title:t,text:n,confirmButtonText:"OK",confirmButtonColor:"#dc2626"});case 3:e.next=6;break;case 5:alert("".concat(t,": ").concat(n));case 6:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)})},{key:"handleLoginError",value:function(e){var t;t=e.message.includes("email")||e.message.includes("user")||e.message.includes("password")?"Email atau password salah. Silakan periksa kembali.":e.message.includes("network")||!navigator.onLine?"Koneksi internet bermasalah. Silakan periksa koneksi Anda.":e.message||"Terjadi kesalahan yang tidak diketahui. Silakan coba lagi.",this.showErrorAlert("Login Gagal",t)}},{key:"showLoading",value:function(){var e=this.element.querySelector("#btn-submit");e.disabled=!0,e.innerHTML='<div class="loading-spinner"></div> Masuk...'}},{key:"hideLoading",value:function(){var e=this.element.querySelector("#btn-submit");e.disabled=!1,e.textContent="Sign In"}},{key:"destroy",value:function(){}}],t&&m(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,i,o,u}()}}]);